<mujoco model="pushing">
  <compiler inertiafromgeom='true' angle="radian" meshdir="meshes/" />

  <option integrator="RK4" solver="PGS" timestep="0.001" gravity="0 0 -9.81" iterations="50"/>

  <asset>
    <!--
    <mesh file="pushing_box.stl"/>
    <mesh file="pushing_hand_1.stl"/>
    <mesh file="pushing_hand_2.stl"/>
    <mesh file="pushing_hand_3.stl"/>
    -->
    <mesh file="push_box.stl"/>
    <mesh file="pushing_hand.stl"/>
    <mesh file="caster_wheel.stl"/>
    <mesh file="caster_middle.stl"/>
    <mesh file="caster_top.stl"/>
    


    <texture type="skybox" builtin="gradient" rgb1=".2 .3 .4" rgb2="1 1 1"
      width="100" height="100"/>
    <texture name="groundplane" type="2d" builtin="checker" rgb1=".25 .26 .25"
      rgb2=".22 .22 .22" width="100" height="100" mark="none" markrgb=".8 .8 .8"/>
    <texture name="greenground" type="2d" builtin="gradient" rgb1="0.19 0.28 0.23"
      rgb2="0 0 0" width="1000" height="1000" mark="none" markrgb=".8 .8 .8"/>
    <material name="MatViz" specular="1" shininess=".1" reflectance="0.5" rgba=".07 .07 .1 1"/>
    <material name="MatGnd" texture="groundplane"  texrepeat="5 5" specular="1" shininess="0" reflectance="0"/>

  </asset>

  <default>
    <geom contype='1' conaffinity='1' condim='3' margin="0.001" />

    <joint limited="false" damping="0" armature=".01"/>

    <default class ="vizNcoll">
      <geom material="MatViz" type="mesh" condim="3" contype="1" conaffinity="1" margin="0.001"/>
      <joint pos="0 0 0" type="hinge"/>
    </default>
    <default class ="ground">
      <geom type="plane" margin="0.001" contype="1" friction="10"/>
    </default>
  </default>


  <worldbody>
    
    <light cutoff="200" diffuse="1.2 1.2 1.2" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1"/>

    <camera name="view1" pos="0 0 2.0" zaxis="0 0 1" fovy="45" ipd="0.068"/>
    <camera name="view2" pos="1.0 0.7 0.3" xyaxes="-1 1 0 0 0 1" fovy="45" ipd="0.068"/>


    <geom name="ground" class="ground" type='plane' pos="0 0 0" rgba="0.19 0.30 0.23 1" size="2000 2000 1000"/>

    <body name="push_box" childclass="vizNcoll" pos="0 0 0">
      <geom mesh="push_box"/>
      <body name="pushing_hand_1" childclass="vizNcoll" pos="68 260 200" axisangle="1 0 0 1.570796">
        <joint axis="0 0 1" limited="true" name="slider_1" pos="68 260 200" range="-100 100" type="slide"/>
        <geom mesh="pushing_hand"/>
      </body>
      
      <body name="pushing_hand_2" childclass="vizNcoll" pos="158 260 200" axisangle="1 0 0 1.570796">
        <joint axis="0 0 1" limited="true" name="slider_2" pos="158 260 200" range="-100 100" type="slide"/>
        <geom mesh="pushing_hand"/>
      </body>
      
      <body name="pushing_hand_3" childclass="vizNcoll" pos="248 260 200" axisangle="1 0 0 1.570796">
        <joint axis="0 0 1" limited="true" name="slider_3" pos="248 260 200" range="-100 100" type="slide"/>
        <geom mesh="pushing_hand"/>
      </body>

    </body>
    
    
    
    <body name="object_box" pos="158 -220 195" axisangle="0 0 1 3.141592">
      <joint name="fixed" axis="0 0 -1" />
      <body name="caster_top_1" childclass="vizNcoll" pos="110 110 -170" axisangle="1 0 0 1.570796">
        <joint name="caster_top_1" axis="0 -1 0" />
        <body name="caster_middle_1" childclass="vizNcoll" pos="0 0 0">
          <joint name="caster_middle_1" axis="-1 0 0" />
          <body name="caster_wheel_1" childclass="vizNcoll" pos="0 0 0">
            <geom mesh="caster_wheel" contype="1" conaffinity="1" condim="3"/>
          </body>
          <geom mesh="caster_middle" contype="1" conaffinity="1" condim="3"/>
        </body>
        <geom mesh="caster_top" contype="1" conaffinity="1" condim="3"/>
      </body>
      <body name="caster_top_2" childclass="vizNcoll" pos="-110 110 -170" axisangle="1 0 0 1.570796">
        <joint name="caster_top_2" axis="0 -1 0" />
        <body name="caster_middle_2" childclass="vizNcoll" pos="0 0 0">
          <joint name="caster_middle_2" axis="-1 0 0" />
          <body name="caster_wheel_2" childclass="vizNcoll" pos="0 0 0">
            <geom mesh="caster_wheel" contype="1" conaffinity="1" condim="3"/>
          </body>
          <geom mesh="caster_middle" contype="1" conaffinity="1" condim="3"/>
        </body>
        <geom mesh="caster_top" contype="1" conaffinity="1" condim="3"/>
      </body>
      <body name="caster_top_3" childclass="vizNcoll" pos="110 -110 -170" axisangle="1 0 0 1.570796">
        <joint name="caster_top_3" axis="0 -1 0" />
        <body name="caster_middle_3" childclass="vizNcoll" pos="0 0 0">
          <joint name="caster_middle_3" axis="-1 0 0" />
          <body name="caster_wheel_3" childclass="vizNcoll" pos="0 0 0">
            <geom mesh="caster_wheel" contype="1" conaffinity="1" condim="3"/>
          </body>
          <geom mesh="caster_middle" contype="1" conaffinity="1" condim="3"/>
        </body>
        <geom mesh="caster_top" contype="1" conaffinity="1" condim="3"/>
      </body>
      <body name="caster_top_4" childclass="vizNcoll" pos="-110 -110 -170" axisangle="1 0 0 1.570796">
        <joint name="caster_top_4" axis="0 -1 0" />
        <body name="caster_middle_4" childclass="vizNcoll" pos="0 0 0">
          <joint name="caster_middle_4" axis="-1 0 0" />
          <body name="caster_wheel_4" childclass="vizNcoll" pos="0 0 0">
            <geom mesh="caster_wheel" contype="1" conaffinity="1" condim="3"/>
          </body>
          <geom mesh="caster_middle" contype="1" conaffinity="1" condim="3"/>
        </body>
        <geom mesh="caster_top" contype="1" conaffinity="1" condim="3"/>
      </body>
      <geom name="object_box" rgba="0.9 0.2 0.2 1" size="125 125 125" type="box" contype="1" conaffinity="1" condim="3"/>

    </body>
    
  </worldbody>
  

  <!--  ================= Position actuators ================= /-->
  <!--
  <actuator>
      <position joint='pushing_hand_1'  name='Ajaco_joint_1' kp="50" ctrlrange='-3.141 3.141' ctrllimited='true'/>
      <position joint='pushing_hand_2'  name='Ajaco_joint_2' kp="100" ctrlrange='-2.40855 2.40855' ctrllimited='true'/>
      <position joint='pushing_hand_3'  name='Ajaco_joint_3' kp="100" ctrlrange='-2.84489 2.84489' ctrllimited='true'/>
  </actuator>
  -->
    <!--  ================= Velocity actuators ================= /-->
<!--
  <actuator>
    <velocity joint='jaco_joint_1'  name='Ajaco_joint_1' kv="25" ctrlrange="-1 1"/>
    <velocity joint='jaco_joint_2'  name='Ajaco_joint_2' kv="25" ctrlrange="-1 1"/>
    <velocity joint='jaco_joint_3'  name='Ajaco_joint_3' kv="25" ctrlrange="-1 1"/>
    <velocity joint='jaco_joint_4'  name='jaco_joint_4' kv="25"  ctrlrange="-1 1"/>
    <velocity joint='jaco_joint_5'  name='Ajaco_joint_5' kv="25" ctrlrange="-1 1"/>
    <velocity joint='jaco_joint_6'  name='Ajaco_joint_6' kv="25" ctrlrange="-1 1" />
  </actuator>
-->

  <actuator>
    <motor gear="100" joint="slider_1" name="slide_1"/>
    <motor gear="100" joint="slider_2" name="slide_2"/>
    <motor gear="100" joint="slider_3" name="slide_3"/>
    <velocity joint='caster_top_1'  name='Acaster_top_1' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_middle_1'  name='Acaster_middle_1' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_top_2'  name='Acaster_top_2' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_middle_2'  name='Acaster_middle_2' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_top_3'  name='Acaster_top_3' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_middle_3'  name='Acaster_middle_3' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_top_4'  name='Acaster_top_4' kv="25" ctrlrange="-1 1"/>
    <velocity joint='caster_middle_4'  name='Acaster_middle_4' kv="25" ctrlrange="-1 1"/>
  </actuator>

</mujoco>
